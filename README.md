
# Менеджер категорий и товаров

Проект предназначен для управления категориями и товарами, включая их загрузку из JSON-файлов, подсчёт объектов и проведение тестов. В проекте реализованы основные классы `Category` и `Product`, а также функциональности для работы с данными.

---

## Содержание

- [Описание](#описание)
- [Технологии](#технологии)
- [Установка](#установка)
- [Использование](#использование)
- [Тестирование](#тестирование)

---

## Описание

Система управления категориями и товарами включает следующие особенности:



- **Классы `Category` и `Product`**: Представляют категории и товары, поддерживают операции добавления товаров и подсчёта объектов.
- **Загрузка данных из JSON-файла**: Возможность загрузки категорий и товаров из внешнего файла.
- **Подсчёт объектов**: В проекте реализованы функции для подсчёта количества категорий и товаров.
- **Строковое представление объектов**: 
  - Каждый продукт отображается в виде:
    ```
    Название продукта, 80 руб. Остаток: 15 шт.
    ```
  - Категории отображаются так:
    ```
    Название категории, количество продуктов: 200 шт.
    ```
  - Геттер списка товаров в `Category` автоматически преобразует объекты `Product` в строки.

- **Операция сложения для объектов `Product`**: 
  - Реализована операция сложения товаров, которая вычисляет общую стоимость всех единиц товара:
    ```python
    Product("Товар A", "", 100, 10) + Product("Товар B", "", 200, 2)
    ```
    Результат: `100 × 10 + 200 × 2 = 1400`.

- **Итератор для перебора товаров в категории**:
  - Класс `ProductIterator` позволяет перебирать товары категории в цикле `for`:
    ```python
    for product in ProductIterator(category):
        print(product)
    ```

- **Наследование**:
  - Классы товаров в проекте наследуются от базового класса `Product`. Пример:
    - `Smartphone` (смартфоны) с дополнительными аттрибутами: производительность, модель, объём памяти, цвет.
    - `LawnGrass` (газонная трава) с дополнительными аттрибутами: страна-производитель, срок прорастания, цвет.
- **Строковое представление объектов `Product` и `Category`**:
  - Каждый продукт теперь отображается в виде:
    ```
    Название продукта, 80 руб. Остаток: 15 шт.
    ```
  - Категории отображаются так:
    ```
    Название категории, количество продуктов: 200 шт.
    ```
  - Геттер списка товаров в `Category` автоматически преобразует объекты `Product` в строки.

- **Операция сложения для объектов `Product`**: 
  - Реализована операция сложения товаров, которая вычисляет общую стоимость всех единиц товара:
    ```python
    Product("Товар A", "", 100, 10) + Product("Товар B", "", 200, 2)
    ```
    Результат: `100 × 10 + 200 × 2 = 1400`.

- **Итератор для перебора товаров в категории**:
  - Класс `ProductIterator` позволяет перебирать товары категории в цикле `for`:
    ```python
    for product in ProductIterator(category):
        print(product)
    ```

- **Наследование**:
  - Классы товаров в проекте наследуются от базового класса `Product`. Пример:
    - `Smartphone` (смартфоны) с дополнительными аттрибутами: производительность, модель, объём памяти, цвет.
    - `LawnGrass` (газонная трава) с дополнительными аттрибутами: страна-производитель, срок прорастания, цвет.
- **Строковое представление объектов `Product` и `Category`**:
  - Каждый продукт теперь отображается в виде:
    ```
    Название продукта, 80 руб. Остаток: 15 шт.
    ```
  - Категории отображаются в виде:
    ```
    Название категории, количество продуктов: 200 шт.
    ```
  - Геттер списка товаров в `Category` теперь автоматически преобразует объекты `Product` в строки.

- **Реализация операции сложения (`__add__`) для объектов `Product`**:
  - Позволяет складывать общую стоимость всех товаров на складе.
  - Например, при сложении двух товаров:
    - `Product("Товар A", "", 100, 10) + Product("Товар B", "", 200, 2)`
    - Результат: `100 × 10 + 200 × 2 = 1400`.

- **Реализация итератора для перебора товаров категории**:
  - Вспомогательный класс `ProductIterator` позволяет проходить по товарам категории в цикле `for`:
    ```python
    for product in ProductIterator(category):
        print(product)
    ```
  - Итератор возвращает товары по одному.

---

## Технологии

Проект использует следующие технологии:
- Python 3.9+
- `pytest` для тестирования
- `json` для работы с файлами данных
- Poetry для управления зависимостями

---

## Установка

Для установки проекта выполните следующие шаги:

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/ваш-репозиторий.git
   ```

2. Перейдите в директорию проекта:
   ```bash
   cd ваш-репозиторий
   ```

3. Установите зависимости через Poetry:
   ```bash
   poetry install
   ```

---

## Использование

### Загрузка данных из JSON-файла
Создайте JSON-файл с данными о категориях и товарах (пример в файле `products.json`).

Запустите основной модуль для загрузки и обработки данных:
```bash
poetry run python src/main.py
```

### Работа с категориями
Создайте категорию и добавьте в нее товар:
```python
from classes.category import Category
from classes.product import Product

product = Product("Смартфон", "Описание модели XYZ", 799.99, 10)
category = Category("Электроника", "Смартфоны и гаджеты")
category.add_product(product)

# Просмотр списка товаров в категории
print(category.products)
```

### Использование метода `new_product`
Создайте или обновите товар через метод:
```python
from classes.product import Product

product_data = {"name": "Смартфон", "description": "Описание модели XYZ", "price": 799.99, "quantity": 10}
products = [Product("Смартфон", "Описание модели ABC", 699.99, 5)]
new_product = Product.new_product(product_data, products)
```

### Использование `__add__`
Сложите два товара, чтобы получить общую стоимость всех единиц товара:
```python
product_a = Product("Товар A", "Описание", 100, 10)
product_b = Product("Товар B", "Описание", 200, 2)
total_cost = product_a + product_b  # 1400
print(total_cost)
```

### Использование итератора для товаров категории
Перебирайте товары одной категории:
```python
from classes.category import Category
from utils.product_iterator import ProductIterator

category = Category("Электроника", "Смартфоны и гаджеты", products_list)

for product in ProductIterator(category):
    print(product)
```

---

## Тестирование

Для выполнения тестов с помощью `pytest` выполните:
```bash
pytest
```

Тесты проверяют:

- Корректность инициализации классов `Category` и `Product`.
- Работу методов подсчёта объектов.
- Корректную работу с JSON-файлами.
- Добавление товаров в категорию через приватный список.
- Работа геттера для вывода списка товаров.
- Строковое представление объектов с использованием `__str__`.
- Правильность работы метода сложения товаров (`__add__`).
- Работу итератора для перебора товаров в категории.
