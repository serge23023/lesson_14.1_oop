# Менеджер категорий и товаров

Проект предназначен для управления категориями и товарами, включая их загрузку из JSON-файлов, подсчет объектов и проведение тестов. Реализованы основные классы `Category` и `Product`, а также функции для работы с данными.

---

## Содержание

- [Описание](#описание)
- [Технологии](#технологии)
- [Установка](#установка)
- [Использование](#использование)
- [Тестирование](#тестирование)

---

## Описание

Система управления категориями и товарами:

- Классы `Category` и `Product` для представления данных.
- Возможность загрузки категорий и товаров из JSON-файла.
- Функции подсчета количества категорий и товаров.
- Реализация тестов для проверки корректности работы.
- Список товаров в классе `Category` реализован как приватный атрибут.
- Для добавления товаров в категорию реализован метод `add_product()`:
  - Принимает объект класса `Product`.
  - Добавляет товар в приватный список.

- Геттер для просмотра списка товаров в категории возвращает список строк в формате:
  ```
  Название продукта, 80 руб. Остаток: 15 шт.
  ```

- Метод `new_product` позволяет:
  - Создавать объекты класса `Product` из словаря.
  - Обрабатывать дубликаты:
    - Если товар уже существует, увеличивать его количество.
    - Выбирать максимальную цену.

- Цена товара в классе `Product` сделана приватным атрибутом:
  - Проверка корректности при установке новой цены:
    - Цена не может быть ниже или равна нулю.
  - Подтверждение пользователя при снижении цены через ввод `y` (согласие) или `n` (отказ).

---

## Технологии

Проект построен с использованием:

- Python 3.9+
- Модуль `pytest` для тестирования
- Модуль `json` для работы с файлами данных
- Poetry для управления зависимостями

---

## Установка

Шаги для установки проекта:

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/ваш-репозиторий.git
   ```

2. Перейдите в папку проекта:
   ```bash
   cd ваш-репозиторий
   ```

3. Установите зависимости через Poetry:
   ```bash
   poetry install
   ```

---

## Использование

### Загрузка данных из JSON-файла
Создайте JSON-файл с данными о категориях и товарах (пример в файле `products.json`).

Запустите основной модуль для загрузки и обработки данных:
```bash
poetry run python src/main.py
```

### Работа с категориями
Создайте категорию и добавьте в нее товар:
```python
from classes.category import Category
from classes.product import Product

product = Product("Смартфон", "Описание модели XYZ", 799.99, 10)
category = Category("Электроника", "Смартфоны и гаджеты")
category.add_product(product)

# Просмотр списка товаров в категории
print(category.products)
```

### Использование метода `new_product`
Создайте или обновите товар через метод:
```python
from classes.product import Product

product_data = {"name": "Смартфон", "description": "Описание модели XYZ", "price": 799.99, "quantity": 10}
products = [Product("Смартфон", "Описание модели ABC", 699.99, 5)]
new_product = Product.new_product(product_data, products)
```

---

## Тестирование

Для выполнения тестов с помощью pytest выполните:
```bash
pytest
```

Тесты проверяют:
- Корректность инициализации классов `Category` и `Product`.
- Работу методов подсчета количества объектов.
- Корректность работы с JSON-файлами.
- Добавление товаров в категорию через приватный список.
- Работу геттера для вывода списка товаров.
- Корректную обработку метода `new_product`.
- Логику установки цены через геттер и сеттер.
